
create table PERSONE (
     idPersona int not null auto_increment,
     Nome varchar(15) not null,
     Cognome varchar(15) not null,
     DataDiNascita date not null,
     constraint IDPERSONE primary key (idPersona));

create table PRODOTTI_SINGOLI (
     idProdotto int not null auto_increment,
     Titolo varchar(50) not null,
     Trama varchar(200) not null,
     Anno int not null,
     idPersona int not null,
     Produzione varchar(50) not null,
     idSerie int,
     stagione int,
     numeroEpisodio int,
     constraint IDPRODOTTI_SINGOLI_ID primary key (idProdotto));

create table COLONNE_SONORE (
     idColonna int not null auto_increment,
     Titolo varchar(50) not null,
     constraint IDCOLONNE_SONORA_ID primary key (idColonna));

create table PREMI (
     Nome varchar(25) not null,
     Anno int not null,
     constraint IDPREMI_ID primary key (Nome, Anno));

create table ComposizioniColonna (
     idColonna int not null,
     idPersona int not null,
     constraint IDComposizioniColonna primary key (idColonna, idPersona));

create table DisponibilitaProdotti (
     idProdotto int not null,
     NomeServizio varchar(15) not null,
     constraint IDDisponibilitaProdotti primary key (idProdotto, NomeServizio));

create table DisponibilitaSerie (
	idSerie int not null,
    NomeServizio varchar(15) not null,
    constraint IDDisponibilitaSerie primary key (idSerie, NomeServizio));

create table InterpretazioniColonna (
     idColonna int not null,
     idPersona int not null,
     constraint IDInterpretazioniColonna primary key (idColonna, idPersona));

create table Migliori (
     Nome varchar(25) not null,
     Anno int not null,
     idPersona int not null,
     Titolo varchar(15) not null,
     Arrivo varchar(15) not null,
     constraint IDMiglior primary key (idPersona, Nome, Anno));

create table MiglioriProdotti (
     Nome varchar(15) not null,
     Anno int not null,
     idProdotto int not null,
     Titolo varchar(15) not null,
     Arrivo varchar(15) not null,
     constraint IDMiglioriProdotti primary key (idProdotto, Nome, Anno));

create table MiglioriSerie (
     Nome varchar(15) not null,
     Anno int not null,
     idSerieTv int not null,
     Titolo varchar(15) not null,
     Arrivo varchar(15) not null,
     constraint IDMilgioriSerie primary key (idSerieTv, Nome, Anno));

create table MiglioriColonne (
     Nome varchar(15) not null,
     Anno int not null,
     idColonna int not null,
     Titolo varchar(15) not null,
     Arrivo varchar(15) not null,
     constraint IDMilglioriColonne primary key (Nome, Anno, idColonna));

create table Recitazioni (
     idPersona int not null,
     idProdotto int not null,
     constraint IDRecitazioni primary key (idProdotto, idPersona));
     
create table RepartiAudio (
	idProdotto int not null,
    idColonna int not null,
    constraint IDReapartiAudio primary key(idProdotto, idColonna));

create table Scelte (
     Username varchar(20) not null,
     NomeServizio varchar(15) not null,
     constraint IDScelte primary key (Username, NomeServizio));

create table Sceneggiature (
     idProdotto int not null,
     idPersona int not null,
     constraint IDSceneggiature primary key (idProdotto, idPersona));

create table SERIE_TV (
     idSerie int not null auto_increment,
     Titolo varchar(50) not null,
     Trama varchar(200) not null,
     constraint IDSERIE_TV_ID primary key (idSerie));

create table UTENTI (
     Username varchar(20) not null,
     Pass_word varchar(25) not null,
     constraint IDUTENTI primary key (Username));

create table SERVIZI_STREAMING (
     NomeServizio varchar(15) not null,
     SitoWeb varchar(50) not null unique,
     constraint IDSERVIZI_STREAMING primary key (NomeServizio));

create table Valutazioni (
     idProdotto int not null,
     Username varchar(20) not null,
     Voto int not null,
     constraint IDValutazioniProdotto primary key (idProdotto, Username));

create table WatchlistProdotti (
     idProdotto int not null,
     Username varchar(20) not null,
     constraint IDWatchlistProdotti primary key (idProdotto, Username));

create table WatchlistSerie (
     idSerie int not null,
     Username varchar(20) not null,
     constraint IDWatchlistSerieTv primary key (idSerie, Username));

alter table PRODOTTI_SINGOLI add constraint FKRegia
     foreign key (idPersona)
     references PERSONE (idPersona);

alter table PRODOTTI_SINGOLI add constraint FKSerie
     foreign key (idSerie)
     references SERIE_TV (idSerie);

alter table ComposizioniColonna add constraint FKComposizionePersona
     foreign key (idPersona)
     references PERSONE (idPersona);

alter table ComposizioniColonna add constraint FKComposizioneColonnaSonora
     foreign key (idColonna)
     references COLONNE_SONORE (idColonna);

alter table DisponibilitaProdotti add constraint FKDisponibiltaServizio
     foreign key (NomeServizio)
     references SERVIZI_STREAMING (NomeServizio);

alter table DisponibilitaProdotti add constraint FKDisponibilitaProdotto
     foreign key (idProdotto)
     references PRODOTTI_SINGOLI (idProdotto);

alter table InterpretazioniColonna add constraint FKInterpretazionePersona
     foreign key (idPersona)
     references PERSONE (idPersona);

alter table InterpretazioniColonna add constraint FKInterpretazioneColonnaSonora
     foreign key (idColonna)
     references COLONNE_SONORE (idColonna);

alter table Migliori add constraint FKMigliorPersona
     foreign key (idPersona)
     references PERSONE (idPersona);

alter table Migliori add constraint FKMigliorPremioPersona
     foreign key (Nome, Anno)
     references PREMI (Nome, Anno);

alter table MiglioriProdotti add constraint FKMigliorProdotto
     foreign key (idProdotto)
     references PRODOTTI_SINGOLI (idProdotto);

alter table MiglioriProdotti add constraint FKMigliorProdottoPremio
     foreign key (Nome, Anno)
     references PREMI (Nome, Anno);

alter table MiglioriSerie add constraint FKMigliorSerie
     foreign key (idSerieTv)
     references SERIE_TV (idSerie);

alter table MiglioriSerie add constraint FKMigliorSeriePremio
     foreign key (Nome, Anno)
     references PREMI (Nome, Anno);

alter table MiglioriColonne add constraint FKMigliorColonna
     foreign key (idColonna)
     references COLONNE_SONORE (idColonna);

alter table MiglioriColonne add constraint FKMigliorColonnaPremio
     foreign key (Nome, Anno)
     references PREMI (Nome, Anno);

alter table Recitazioni add constraint FKRecitazioneProdotto
     foreign key (idProdotto)
     references PRODOTTI_SINGOLI (idProdotto);

alter table Recitazioni add constraint FKRecitrazionePersona
     foreign key (idPersona)
     references PERSONE (idPersona);

alter table Scelte add constraint FKSceltaServizio
     foreign key (NomeServizio)
     references SERVIZI_STREAMING (NomeServizio);

alter table Scelte add constraint FKSceltaUtente
     foreign key (Username)
     references UTENTI (Username);

alter table Sceneggiature add constraint FKSceneggiaturaPersona
     foreign key (idPersona)
     references PERSONE (idPersona);

alter table Sceneggiature add constraint FKSceneggiaturaProdotto
     foreign key (idProdotto)
     references PRODOTTI_SINGOLI (idProdotto);

alter table Valutazioni add constraint FKValutazioneUtente
     foreign key (Username)
     references UTENTI (Username);

alter table Valutazioni add constraint FKValutazioneProdotto
     foreign key (idProdotto)
     references PRODOTTI_SINGOLI (idProdotto);

alter table WatchlistProdotti add constraint FKWatchlistUtente
     foreign key (Username)
     references UTENTI (Username);

alter table WatchlistProdotti add constraint FKWatchlistProdotto
     foreign key (idProdotto)
     references PRODOTTI_SINGOLI (idProdotto);

alter table WatchListSerie add constraint FKWatchlistSerieUtente
     foreign key (Username)
     references UTENTI (Username);

alter table WatchListSerie add constraint FKWatchlistSerie
     foreign key (idSerie)
     references SERIE_TV (idSerie);

alter table RepartiAudio add constraint FKProdotto
	foreign key (idProdotto)
    references PRODOTTI_SINGOLI (idProdotto);

alter table RepartiAudio add constraint FKColonna
	foreign key (idColonna)
    references COLONNE_SONORE (idColonna);
    
alter table DisponibilitaSerie add constraint FKSerieDisponibile
	foreign key (idSerie)
    references SERIE_TV (idSerie);

alter table DisponibilitaSerie add constraint FKServizio
	foreign key (NomeServizio)
    references SERVIZI_STREAMING (NomeServizio);

insert into persone (Nome, Cognome, DataDiNascita) 
values ('Vince','Giligan', '1967-02-10');
insert into persone (Nome, Cognome, DataDiNascita ) 
values ('Aaron','Paul', '1979-08-27' );
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Jonathan','Banks', '1947-01-31');
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Matt','Jones', '1981-11-01' );
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Charles','Baker', '1971-02-27' );
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Todd','Terry', '1966-11-12' );
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Larry','Hankin', '1937-12-7' );
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Jesse','Plemons', '1988-04-02' );
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Tom','Bower', '1938-01-03' );
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Tess','Harper', '1950-08-15');
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Micheal','Bofshever', '1950-10-12');
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Bryan','Cranston', '1956-03-07' );
insert into persone (Nome, Cognome, DataDiNascita) 
values ('Krysten','Ritter', '1981-12-16' );

insert into prodotti_singoli (Titolo, Trama, Anno, idPersona, Produzione)
values ('El Camino: il film di Breaking Bad', 'Il fuggitivo Jesse Pinkman fugge dai suoi rapitori, dalla legge e dal suo passato', 2019, 1, 'Netflix');

insert into sceneggiature (idProdotto, idPersona)
values (1,1);

insert into colonne_sonore (Titolo)
values ('I\'d Really Love to See You Tonight');

insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('Netflix','netflix.com');
insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('Prime Video','primevideo.com');
insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('Disney+','disneyplus.com');
insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('TIM Vision','timvision.it');
insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('CHILI','chili.com');
insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('RakutenTv','rakuten.tv');
insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('Apple TV+','tv.apple.com');
insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('NOW','nowtv.it');
insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('RaiPlay','raiplay.it');
insert into servizi_streaming (NomeServizio, SitoWeb) 
values ('Infinity','infinitytv.it');